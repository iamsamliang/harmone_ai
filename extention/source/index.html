<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" type="image/png" href="icon.png">

    <title>Recorder代码运行和静态分发工具</title>

    <script src="../src/recorder-core.js"></script>
    <style>@font-face {
        font-family: 'monica-ext-font_YIBBBFG';
        src: url('chrome-extension://ofpnmcalabcbjgholdjcjblkibolbppb/static//fonts/Satoshi-Variable.ttf');
        font-display: swap;
    }</style>
    <script src="../src/extensions/waveview.js"></script>
    <script src="../src/extensions/wavesurfer.view.js"></script>
    <script src="../src/extensions/lib.fft.js"></script>
    <script src="../src/extensions/frequency.histogram.view.js"></script>

    <script src="ztest-jquery.min-1.9.1.js"></script>
    <script src="ztest-codemirror.min.5.48.4.js"></script>
    <style>.CodeMirror {
        font-family: monospace;
        height: 300px;
        color: black;
        direction: ltr
    }

    .CodeMirror-lines {
        padding: 4px 0
    }

    .CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {
        padding: 0 4px
    }

    .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
        background-color: white
    }

    .CodeMirror-gutters {
        border-right: 1px solid #ddd;
        background-color: #f7f7f7;
        white-space: nowrap
    }

    .CodeMirror-linenumber {
        padding: 0 3px 0 5px;
        min-width: 20px;
        text-align: right;
        color: #999;
        white-space: nowrap
    }

    .CodeMirror-guttermarker {
        color: black
    }

    .CodeMirror-guttermarker-subtle {
        color: #999
    }

    .CodeMirror-cursor {
        border-left: 1px solid black;
        border-right: 0;
        width: 0
    }

    .CodeMirror div.CodeMirror-secondarycursor {
        border-left: 1px solid silver
    }

    .cm-fat-cursor .CodeMirror-cursor {
        width: auto;
        border: 0 !important;
        background: #7e7
    }

    .cm-fat-cursor div.CodeMirror-cursors {
        z-index: 1
    }

    .cm-fat-cursor-mark {
        background-color: rgba(20, 255, 20, 0.5);
        -webkit-animation: blink 1.06s steps(1) infinite;
        -moz-animation: blink 1.06s steps(1) infinite;
        animation: blink 1.06s steps(1) infinite
    }

    .cm-animate-fat-cursor {
        width: auto;
        border: 0;
        -webkit-animation: blink 1.06s steps(1) infinite;
        -moz-animation: blink 1.06s steps(1) infinite;
        animation: blink 1.06s steps(1) infinite;
        background-color: #7e7
    }

    @-moz-keyframes blink {
        50% {
            background-color: transparent
        }
    }

    @-webkit-keyframes blink {
        50% {
            background-color: transparent
        }
    }

    @keyframes blink {
        50% {
            background-color: transparent
        }
    }

    .cm-tab {
        display: inline-block;
        text-decoration: inherit
    }

    .CodeMirror-rulers {
        position: absolute;
        left: 0;
        right: 0;
        top: -50px;
        bottom: 0;
        overflow: hidden
    }

    .CodeMirror-ruler {
        border-left: 1px solid #ccc;
        top: 0;
        bottom: 0;
        position: absolute
    }

    .cm-s-default .cm-header {
        color: blue
    }

    .cm-s-default .cm-quote {
        color: #090
    }

    .cm-negative {
        color: #d44
    }

    .cm-positive {
        color: #292
    }

    .cm-header, .cm-strong {
        font-weight: bold
    }

    .cm-em {
        font-style: italic
    }

    .cm-link {
        text-decoration: underline
    }

    .cm-strikethrough {
        text-decoration: line-through
    }

    .cm-s-default .cm-keyword {
        color: #708
    }

    .cm-s-default .cm-atom {
        color: #219
    }

    .cm-s-default .cm-number {
        color: #164
    }

    .cm-s-default .cm-def {
        color: #00f
    }

    .cm-s-default .cm-variable-2 {
        color: #05a
    }

    .cm-s-default .cm-variable-3, .cm-s-default .cm-type {
        color: #085
    }

    .cm-s-default .cm-comment {
        color: #a50
    }

    .cm-s-default .cm-string {
        color: #a11
    }

    .cm-s-default .cm-string-2 {
        color: #f50
    }

    .cm-s-default .cm-meta {
        color: #555
    }

    .cm-s-default .cm-qualifier {
        color: #555
    }

    .cm-s-default .cm-builtin {
        color: #30a
    }

    .cm-s-default .cm-bracket {
        color: #997
    }

    .cm-s-default .cm-tag {
        color: #170
    }

    .cm-s-default .cm-attribute {
        color: #00c
    }

    .cm-s-default .cm-hr {
        color: #999
    }

    .cm-s-default .cm-link {
        color: #00c
    }

    .cm-s-default .cm-error {
        color: red
    }

    .cm-invalidchar {
        color: red
    }

    .CodeMirror-composing {
        border-bottom: 2px solid
    }

    div.CodeMirror span.CodeMirror-matchingbracket {
        color: #0b0
    }

    div.CodeMirror span.CodeMirror-nonmatchingbracket {
        color: #a22
    }

    .CodeMirror-matchingtag {
        background: rgba(255, 150, 0, .3)
    }

    .CodeMirror-activeline-background {
        background: #e8f2ff
    }

    .CodeMirror {
        position: relative;
        overflow: hidden;
        background: white
    }

    .CodeMirror-scroll {
        overflow: scroll !important;
        margin-bottom: -30px;
        margin-right: -30px;
        padding-bottom: 30px;
        height: 100%;
        outline: 0;
        position: relative
    }

    .CodeMirror-sizer {
        position: relative;
        border-right: 30px solid transparent
    }

    .CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
        position: absolute;
        z-index: 6;
        display: none
    }

    .CodeMirror-vscrollbar {
        right: 0;
        top: 0;
        overflow-x: hidden;
        overflow-y: scroll
    }

    .CodeMirror-hscrollbar {
        bottom: 0;
        left: 0;
        overflow-y: hidden;
        overflow-x: scroll
    }

    .CodeMirror-scrollbar-filler {
        right: 0;
        bottom: 0
    }

    .CodeMirror-gutter-filler {
        left: 0;
        bottom: 0
    }

    .CodeMirror-gutters {
        position: absolute;
        left: 0;
        top: 0;
        min-height: 100%;
        z-index: 3
    }

    .CodeMirror-gutter {
        white-space: normal;
        height: 100%;
        display: inline-block;
        vertical-align: top;
        margin-bottom: -30px
    }

    .CodeMirror-gutter-wrapper {
        position: absolute;
        z-index: 4;
        background: none !important;
        border: none !important
    }

    .CodeMirror-gutter-background {
        position: absolute;
        top: 0;
        bottom: 0;
        z-index: 4
    }

    .CodeMirror-gutter-elt {
        position: absolute;
        cursor: default;
        z-index: 4
    }

    .CodeMirror-gutter-wrapper ::selection {
        background-color: transparent
    }

    .CodeMirror-gutter-wrapper ::-moz-selection {
        background-color: transparent
    }

    .CodeMirror-lines {
        cursor: text;
        min-height: 1px
    }

    .CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {
        -moz-border-radius: 0;
        -webkit-border-radius: 0;
        border-radius: 0;
        border-width: 0;
        background: transparent;
        font-family: inherit;
        font-size: inherit;
        margin: 0;
        white-space: pre;
        word-wrap: normal;
        line-height: inherit;
        color: inherit;
        z-index: 2;
        position: relative;
        overflow: visible;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-variant-ligatures: contextual;
        font-variant-ligatures: contextual
    }

    .CodeMirror-wrap pre.CodeMirror-line, .CodeMirror-wrap pre.CodeMirror-line-like {
        word-wrap: break-word;
        white-space: pre-wrap;
        word-break: normal
    }

    .CodeMirror-linebackground {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 0
    }

    .CodeMirror-linewidget {
        position: relative;
        z-index: 2;
        padding: .1px
    }

    .CodeMirror-rtl pre {
        direction: rtl
    }

    .CodeMirror-code {
        outline: 0
    }

    .CodeMirror-scroll, .CodeMirror-sizer, .CodeMirror-gutter, .CodeMirror-gutters, .CodeMirror-linenumber {
        -moz-box-sizing: content-box;
        box-sizing: content-box
    }

    .CodeMirror-measure {
        position: absolute;
        width: 100%;
        height: 0;
        overflow: hidden;
        visibility: hidden
    }

    .CodeMirror-cursor {
        position: absolute;
        pointer-events: none
    }

    .CodeMirror-measure pre {
        position: static
    }

    div.CodeMirror-cursors {
        visibility: hidden;
        position: relative;
        z-index: 3
    }

    div.CodeMirror-dragcursors {
        visibility: visible
    }

    .CodeMirror-focused div.CodeMirror-cursors {
        visibility: visible
    }

    .CodeMirror-selected {
        background: #d9d9d9
    }

    .CodeMirror-focused .CodeMirror-selected {
        background: #d7d4f0
    }

    .CodeMirror-crosshair {
        cursor: crosshair
    }

    .CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection {
        background: #d7d4f0
    }

    .CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection {
        background: #d7d4f0
    }

    .cm-searching {
        background-color: #ffa;
        background-color: rgba(255, 255, 0, .4)
    }

    .cm-force-border {
        padding-right: .1px
    }

    @media print {
        .CodeMirror div.CodeMirror-cursors {
            visibility: hidden
        }
    }

    .cm-tab-wrap-hack:after {
        content: ''
    }

    span.CodeMirror-selectedtext {
        background: 0
    }</style>
    <script src="ztest-rsa.js"></script>
    <script>
        //受信任的Root公钥列表，最大程度确保自动运行本工具时执行的任意代码的作者身份未被篡改
        //添加root公钥需要额外验证签名SelfSign=SignSHA1(ID)，用于确保自身的手写正确性
        var TrustRSARoots = [
            {
                Name: "官方G01签发的作者身份验证",
                ID: "G01",
                Public: "AQAB",
                Modulus: "2v+8JirVYBFVqh7AzeaPs5I84JrstgVMwv1qAoX7nZTfiiTS7M9jFgIOxtugveJQkuZsjNxzQ+p/iIfCEqtOwkhsx+DLhwJY5R60NXQwivU7u6ENhZgNrBoIxs35UyLsyTROd4i4cGRq49sETfwK1nBNMH87OWtwVmquQmWs8zk=",
                SelfSign: "D6onRGidDe668nWFs6N1qAFxDDO0ug0AwrezNHu9VguyLjhhF/Pkd0o6X7VajDvUo4RXxooRuDF0WvVk103I3xjbCz7pAlyKGcqVGdqRiIkXr6RsgxzbdQ9bGOFt3k6hioFPpJX4OBukPaIjCUVzohq/axKhXxgNk81oDTgUawE="
            }
        ];
        //吊销列表 emmm...记录已签发公钥的hash即可完成吊销，用不到就不写了
    </script>

    <style>
        body {
            word-wrap: break-word;
            background: #f5f5f5 center top no-repeat;
            background-size: auto 680px;
        }

        pre {
            white-space: pre-wrap;
        }

        a {
            text-decoration: none;
            color: #06c;
            cursor: pointer;
        }

        a:hover {
            color: #f00;
        }

        .main {
            max-width: 700px;
            margin: 0 auto;
            padding-bottom: 80px
        }

        .mainBox {
            margin-top: 12px;
            padding: 12px;
            border-radius: 6px;
            background: #fff;
            --border: 1px solid #f60;
            box-shadow: 2px 2px 3px #aaa;
        }


        .mainBtn {
            display: inline-block;
            cursor: pointer;
            border: none;
            border-radius: 3px;
            background: #f60;
            color: #fff;
            padding: 0 15px;
            margin: 3px 20px 3px 0;
            line-height: 36px;
            height: 36px;
            overflow: hidden;
            vertical-align: middle;
        }

        .mainBtn:active {
            background: #f00;
        }

        .recwaveChoice {
            cursor: pointer;
            display: inline-block;
            vertical-align: bottom;
            border-right: 1px solid #ccc;
            background: #ddd;
            line-height: 28px;
            font-size: 12px;
            color: #666;
            padding: 0 5px;
        }

        .recwaveChoice:first-child {
            border-radius: 99px 0 0 99px;
        }

        .recwaveChoice:last-child {
            border-radius: 0 99px 99px 0;
            border-right: none;
        }

        .recwaveChoice.slc, .recwaveChoice:hover {
            background: #f60;
            color: #fff;
        }
    </style>
</head>

<body monica-version="4.1.1" monica-id="ofpnmcalabcbjgholdjcjblkibolbppb">

<div class="main">
    <div class="mainBox">
        <span style="font-size:32px;color:#f60;">Recorder代码运行和静态分发工具</span>
        <a href="https://github.com/xiangyuecn/Recorder" target="_blank">GitHub</a>
        | <a href="https://gitee.com/xiangyuecn/Recorder" target="_blank">Gitee</a>
    </div>

    <div class="mainBox">
        <div class="mainCodeEdit" style="border:1px solid #ddd">
            <textarea class="codeEdit" style="width: 98%; height: 300px; display: none;"></textarea>
            <div class="CodeMirror cm-s-default CodeMirror-wrap" style="width: 661px; height: auto;">
                <div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 37px;">
                    <textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                              style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea>
                </div>
                <div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"
                     style="width: 18px; pointer-events: none; bottom: 0px;">
                    <div style="min-width: 1px; height: 0px;"></div>
                </div>
                <div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"
                     style="height: 18px; pointer-events: none;">
                    <div style="height: 100%; min-height: 1px; width: 0px;"></div>
                </div>
                <div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div>
                <div class="CodeMirror-gutter-filler" cm-not-content="true"></div>
                <div class="CodeMirror-scroll" tabindex="-1">
                    <div class="CodeMirror-sizer"
                         style="margin-left: 33px; margin-bottom: 0px; border-right-width: 30px; min-height: 5147px; padding-right: 0px; padding-bottom: 0px;">
                        <div style="position: relative; top: 0px;">
                            <div class="CodeMirror-lines" role="presentation">
                                <div role="presentation" style="position: relative; outline: none;">
                                    <div class="CodeMirror-measure">
                                        <div class="CodeMirror-linenumber CodeMirror-gutter-elt">
                                            <div>298</div>
                                        </div>
                                    </div>
                                    <div class="CodeMirror-measure"></div>
                                    <div style="position: relative; z-index: 1;"></div>
                                    <div class="CodeMirror-cursors">
                                        <div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15px;">
                                            &nbsp;
                                        </div>
                                    </div>
                                    <div class="CodeMirror-code" role="presentation" style="">
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">1
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">/******************</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">2
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">《【教程】【音频流】【上传】实时转码并上传-mp3专版》</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">3
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">作者：高坚果</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">4
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">时间：2020-5-16 16:58:48</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">5
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">6
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">mp3编码器实现了实时转码，能做到边录音边转码；通过takeoffEncodeChunk回调选项，可以实时接收到mp3转码二进制片段结果；因此可以流式的将数据进行上传，将所有片段直接二进制拼接到一起即为一个完整的mp3。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">7
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">8
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">如果不需要获得最终结果，可实时清理缓冲数据（需延迟清理），避免占用过多内存，想录多久就录多久。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">9
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">10
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">本方法和《【教程】【音频流】【上传】实时转码并上传-通用版》的onProcess+mock实现有本质上的区别，onProcess+mock是实时将pcm片段转成一个mp3文件（会有首尾静默，导致拼接的完整mp3存在停顿杂音），takeoffEncodeChunk是直接得到pcm片段编码生成的mp3数据，因此不会引入停顿杂音影响到mp3的音质。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">11
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">12
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">但takeoffEncodeChunk选项的使用条件比较苛刻，只有环境支持实时特性时才能正常进行录音，否则rec.open会走fail回调。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">13
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">14
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">【接收端要实时播放?】上传过来的数据都是一小段一小段的数据片段文件（每一段均可独立正常播放），接收端可以进行缓冲，实时的解码成PCM进行播放，可以参考《【教程】【音频流】【播放】实时解码播放音频片段》使用BufferStreamPlayer插件来播放。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">15
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">******************/</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">16
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">testOutputWavLog</span><span
                                                    class="cm-operator">=</span><span class="cm-atom">false</span>;<span
                                                    class="cm-comment">//顺带打一份wav的log，录音后执行mp3、wav合并的demo代码可对比音质</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">17
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">testSampleRate</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-number">16000</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">18
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">testBitRate</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-number">16</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">19
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">20
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">SendInterval</span><span class="cm-operator">=</span><span
                                                    class="cm-number">300</span>;<span class="cm-comment">//发送间隔时长(毫秒)，mp3 chunk数据会缓冲，当pcm的累积时长达到这个时长，就会传输发送。这个值在takeoffEncodeChunk实现下，使用0也不会有性能上的影响。</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">21
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">22
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//重置环境，每次开始录音时必须先调用此方法，清理环境</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">23
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">RealTimeSendTryReset</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">24
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryTime</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">25
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">26
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">27
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryTime</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">28
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryNumber</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">29
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">transferUploadNumberMax</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">30
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryBytesChunks</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">31
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryClearPrevBufferIdx</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">32
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryWavTestBuffers</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">33
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">realTimeSendTryWavTestSampleRate</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">34
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">35
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//=====实时处理核心函数==========</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">36
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">RealTimeSendTry</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(<span
                                                    class="cm-def">chunkBytes</span>,<span class="cm-def">isClose</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">37
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">chunkBytes</span>){<span class="cm-comment">//推入缓冲再说</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">38
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryBytesChunks</span>.<span
                                                    class="cm-property">push</span>(<span class="cm-variable-2">chunkBytes</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">39
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">40
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">41
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">t1</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Date</span>.<span class="cm-property">now</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">42
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-operator">!</span><span
                                                    class="cm-variable-2">isClose</span> <span class="cm-operator">&amp;&amp;</span> <span
                                                    class="cm-variable-2">t1</span><span
                                                    class="cm-operator">-</span><span class="cm-variable">realTimeSendTryTime</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable">SendInterval</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">43
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">return</span>;<span class="cm-comment">//控制缓冲达到指定间隔才进行传输</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">44
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">45
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryTime</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">t1</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">46
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">number</span><span
                                                    class="cm-operator">=++</span><span class="cm-variable">realTimeSendTryNumber</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">47
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">48
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">49
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//mp3缓冲的chunk拼接成一个更长点的mp3</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">50
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">len</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">51
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;<span
                                                    class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable">realTimeSendTryBytesChunks</span>.<span
                                                    class="cm-property">length</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">52
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">len</span><span
                                                    class="cm-operator">+=</span><span class="cm-variable">realTimeSendTryBytesChunks</span>[<span
                                                    class="cm-variable-2">i</span>].<span
                                                    class="cm-property">length</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">53
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">54
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">chunkData</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-keyword">new</span> <span
                                                    class="cm-variable">Uint8Array</span>(<span class="cm-variable-2">len</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">55
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>,<span
                                                    class="cm-def">idx</span><span class="cm-operator">=</span><span
                                                    class="cm-number">0</span>;<span class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable">realTimeSendTryBytesChunks</span>.<span
                                                    class="cm-property">length</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">56
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">chunk</span><span
                                                    class="cm-operator">=</span><span class="cm-variable">realTimeSendTryBytesChunks</span>[<span
                                                    class="cm-variable-2">i</span>];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">57
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">chunkData</span>.<span
                                                    class="cm-property">set</span>(<span
                                                    class="cm-variable-2">chunk</span>,<span
                                                    class="cm-variable-2">idx</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">58
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">idx</span><span
                                                    class="cm-operator">+=</span><span
                                                    class="cm-variable-2">chunk</span>.<span
                                                    class="cm-property">length</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">59
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">60
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryBytesChunks</span><span
                                                    class="cm-operator">=</span>[];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">61
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">62
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//推入传输</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">63
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">blob</span><span
                                                    class="cm-operator">=</span><span class="cm-atom">null</span>,<span
                                                    class="cm-def">meta</span><span
                                                    class="cm-operator">=</span>{};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">64
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">chunkData</span>.<span class="cm-property">length</span><span
                                                    class="cm-operator">&gt;</span><span
                                                    class="cm-number">0</span>){<span
                                                    class="cm-comment">//mp3不是空的</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">65
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">blob</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-keyword">new</span> <span class="cm-variable">Blob</span>([<span
                                                    class="cm-variable-2">chunkData</span>],{<span class="cm-property">type</span>:<span
                                                    class="cm-string">"audio/mp3"</span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">66
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">meta</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Recorder</span>.<span class="cm-property">mp3ReadMeta</span>([<span
                                                    class="cm-variable-2">chunkData</span>.<span class="cm-property">buffer</span>],<span
                                                    class="cm-variable-2">chunkData</span>.<span class="cm-property">length</span>)<span
                                                    class="cm-operator">||</span>{};<span class="cm-comment">//读取出这个mp3片段信息</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">67
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">68
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">TransferUpload</span>(<span
                                                    class="cm-variable-2">number</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">69
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-variable-2">blob</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">70
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-variable-2">meta</span>.<span
                                                    class="cm-property">duration</span><span
                                                    class="cm-operator">||</span><span class="cm-number">0</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">71
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">set</span>:{</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">72
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-property">type</span>:<span class="cm-string">"mp3"</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">73
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">sampleRate</span>:<span class="cm-variable-2">meta</span>.<span
                                                    class="cm-property">sampleRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">74
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">bitRate</span>:<span
                                                    class="cm-variable-2">meta</span>.<span
                                                    class="cm-property">bitRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">75
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>}}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">76
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-variable-2">isClose</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">77
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">78
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">79
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">80
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-variable">testOutputWavLog</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">81
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//测试输出一份wav，方便对比数据</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">82
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">recMock2</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Recorder</span>({</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">83
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-property">type</span>:<span class="cm-string">"wav"</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">84
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">sampleRate</span>:<span class="cm-variable">testSampleRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">85
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">bitRate</span>:<span class="cm-number">16</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">86
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">87
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">chunk</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Recorder</span>.<span class="cm-property">SampleData</span>(<span
                                                    class="cm-variable">realTimeSendTryWavTestBuffers</span>,<span
                                                    class="cm-variable">realTimeSendTryWavTestSampleRate</span>,<span
                                                    class="cm-variable">realTimeSendTryWavTestSampleRate</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">88
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">recMock2</span>.<span
                                                    class="cm-property">mock</span>(<span
                                                    class="cm-variable-2">chunk</span>.<span
                                                    class="cm-property">data</span>,<span class="cm-variable">realTimeSendTryWavTestSampleRate</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">89
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">recMock2</span>.<span
                                                    class="cm-property">stop</span>(<span
                                                    class="cm-keyword">function</span>(<span class="cm-def">blob</span>,<span
                                                    class="cm-def">duration</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">90
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">logMsg</span><span class="cm-operator">=</span><span
                                                    class="cm-string">"No."</span><span
                                                    class="cm-operator">+</span>(<span
                                                    class="cm-variable-2">number</span><span
                                                    class="cm-operator">&lt;</span><span
                                                    class="cm-number">100</span><span class="cm-operator">?</span>(<span
                                                    class="cm-string">"000"</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">number</span>).<span class="cm-property">substr</span>(<span
                                                    class="cm-operator">-</span><span class="cm-number">3</span>):<span
                                                    class="cm-variable-2">number</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">91
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span class="cm-property">LogAudio</span>(<span
                                                    class="cm-variable-2">blob</span>,<span class="cm-variable-2">duration</span>,<span
                                                    class="cm-variable-2">recMock2</span>,<span class="cm-variable-2">logMsg</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">92
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">93
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">94
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryWavTestBuffers</span><span
                                                    class="cm-operator">=</span>[];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">95
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">96
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">97
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//=====实时处理时清理一下内存（延迟清理），本方法先于RealTimeSendTry执行======</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">98
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span class="cm-def">RealTimeOnProcessClear</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(<span
                                                    class="cm-def">buffers</span>,<span class="cm-def">powerLevel</span>,<span
                                                    class="cm-def">bufferDuration</span>,<span class="cm-def">bufferSampleRate</span>,<span
                                                    class="cm-def">newBufferIdx</span>,<span
                                                    class="cm-def">asyncEnd</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">99
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-variable">realTimeSendTryTime</span><span
                                                    class="cm-operator">==</span><span
                                                    class="cm-number">0</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">100
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryTime</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Date</span>.<span class="cm-property">now</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">101
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryNumber</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">102
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">transferUploadNumberMax</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">103
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryBytesChunks</span><span
                                                    class="cm-operator">=</span>[];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">104
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryClearPrevBufferIdx</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">105
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryWavTestBuffers</span><span
                                                    class="cm-operator">=</span>[];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">106
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryWavTestSampleRate</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">107
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">108
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">109
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//清理PCM缓冲数据，最后完成录音时不能调用stop，因为数据已经被清掉了</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">110
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//这里进行了延迟操作（必须要的操作），只清理上次到现在的buffer</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">111
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span class="cm-variable">realTimeSendTryClearPrevBufferIdx</span>;<span
                                                    class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable-2">newBufferIdx</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">112
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">buffers</span>[<span
                                                    class="cm-variable-2">i</span>]<span
                                                    class="cm-operator">=</span><span
                                                    class="cm-atom">null</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">113
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">114
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryClearPrevBufferIdx</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">newBufferIdx</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">115
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">116
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//备份一下方便后面生成测试wav</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">117
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">newBufferIdx</span>;<span
                                                    class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span
                                                    class="cm-variable-2">buffers</span>.<span class="cm-property">length</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">118
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryWavTestBuffers</span>.<span
                                                    class="cm-property">push</span>(<span
                                                    class="cm-variable-2">buffers</span>[<span
                                                    class="cm-variable-2">i</span>]);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">119
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">120
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">realTimeSendTryWavTestSampleRate</span><span
                                                    class="cm-operator">=</span><span class="cm-variable-2">bufferSampleRate</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">121
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">122
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">123
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//=====数据传输函数==========</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">124
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">TransferUpload</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(<span
                                                    class="cm-def">number</span>,<span class="cm-def">blobOrNull</span>,<span
                                                    class="cm-def">duration</span>,<span
                                                    class="cm-def">blobRec</span>,<span class="cm-def">isClose</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">125
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">transferUploadNumberMax</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Math</span>.<span class="cm-property">max</span>(<span
                                                    class="cm-variable">transferUploadNumberMax</span>,<span
                                                    class="cm-variable-2">number</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">126
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">blobOrNull</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">127
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">blob</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">blobOrNull</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">128
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">129
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//*********发送方式一：Base64文本发送***************</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">130
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">reader</span><span class="cm-operator">=</span><span
                                                    class="cm-keyword">new</span> <span
                                                    class="cm-variable">FileReader</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">131
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">reader</span>.<span class="cm-property">onloadend</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">132
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">base64</span><span class="cm-operator">=</span>(<span
                                                    class="cm-string-2">/.+;\s*base64\s*,\s*(.+)$/i</span>.<span
                                                    class="cm-property">exec</span>(<span
                                                    class="cm-variable-2">reader</span>.<span
                                                    class="cm-property">result</span>)<span
                                                    class="cm-operator">||</span>[])[<span class="cm-number">1</span>];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">133
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">134
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//可以实现</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">135
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//WebSocket send(base64) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">136
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//WebRTC send(base64) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">137
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//XMLHttpRequest send(base64) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">138
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">139
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//这里啥也不干</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">140
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">141
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">reader</span>.<span class="cm-property">readAsDataURL</span>(<span
                                                    class="cm-variable-2">blob</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">142
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">143
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//*********发送方式二：Blob二进制发送***************</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">144
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//可以实现</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">145
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//WebSocket send(blob) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">146
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//WebRTC send(blob) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">147
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//XMLHttpRequest send(blob) ...</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">148
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">149
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">150
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//****这里仅 console.log一下 意思意思****</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">151
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">numberFail</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">number</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable">transferUploadNumberMax</span><span
                                                    class="cm-operator">?</span><span class="cm-string">'&lt;span style="color:red"&gt;顺序错乱的数据，如果要求不高可以直接丢弃，或者调大SendInterval试试&lt;/span&gt;'</span>:<span
                                                    class="cm-string">""</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">152
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">logMsg</span><span class="cm-operator">=</span><span
                                                    class="cm-string">"No."</span><span
                                                    class="cm-operator">+</span>(<span
                                                    class="cm-variable-2">number</span><span
                                                    class="cm-operator">&lt;</span><span
                                                    class="cm-number">100</span><span class="cm-operator">?</span>(<span
                                                    class="cm-string">"000"</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">number</span>).<span class="cm-property">substr</span>(<span
                                                    class="cm-operator">-</span><span class="cm-number">3</span>):<span
                                                    class="cm-variable-2">number</span>)<span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">numberFail</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">153
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">154
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span class="cm-property">LogAudio</span>(<span
                                                    class="cm-variable-2">blob</span>,<span class="cm-variable-2">duration</span>,<span
                                                    class="cm-variable-2">blobRec</span>,<span class="cm-variable-2">logMsg</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">155
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">156
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-atom">true</span> <span
                                                    class="cm-operator">&amp;&amp;</span> <span class="cm-variable-2">number</span><span
                                                    class="cm-operator">%</span><span class="cm-number">100</span><span
                                                    class="cm-operator">==</span><span class="cm-number">0</span>){<span
                                                    class="cm-comment">//emmm....</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">157
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span class="cm-property">LogClear</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">158
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">159
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">160
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">161
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">isClose</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">162
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Log</span>(<span
                                                    class="cm-string">"No."</span><span
                                                    class="cm-operator">+</span>(<span
                                                    class="cm-variable-2">number</span><span
                                                    class="cm-operator">&lt;</span><span
                                                    class="cm-number">100</span><span class="cm-operator">?</span>(<span
                                                    class="cm-string">"000"</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">number</span>).<span class="cm-property">substr</span>(<span
                                                    class="cm-operator">-</span><span class="cm-number">3</span>):<span
                                                    class="cm-variable-2">number</span>)<span
                                                    class="cm-operator">+</span><span
                                                    class="cm-string">":已停止传输"</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">163
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">164
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">165
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">166
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">167
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">168
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//=====以下代码无关紧要，音频数据源，采集原始音频用的==================</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">169
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//加载框架</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">170
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Import</span>([</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">171
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>{<span
                                                    class="cm-property">url</span>:<span
                                                    class="cm-variable">RootFolder</span><span
                                                    class="cm-operator">+</span><span class="cm-string">"/src/recorder-core.js"</span>,<span
                                                    class="cm-property">check</span>:<span
                                                    class="cm-keyword">function</span>(){<span
                                                    class="cm-keyword">return</span> <span
                                                    class="cm-operator">!</span><span class="cm-variable">window</span>.<span
                                                    class="cm-property">Recorder</span>}}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">172
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">url</span>:<span
                                                    class="cm-variable">RootFolder</span><span
                                                    class="cm-operator">+</span><span class="cm-string">"/src/engine/mp3.js"</span>,<span
                                                    class="cm-property">check</span>:<span
                                                    class="cm-keyword">function</span>(){<span
                                                    class="cm-keyword">return</span> <span
                                                    class="cm-operator">!</span><span
                                                    class="cm-variable">Recorder</span>.<span class="cm-property">prototype</span>.<span
                                                    class="cm-property">mp3</span>}}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">173
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">url</span>:<span
                                                    class="cm-variable">RootFolder</span><span
                                                    class="cm-operator">+</span><span class="cm-string">"/src/engine/mp3-engine.js"</span>,<span
                                                    class="cm-property">check</span>:<span
                                                    class="cm-keyword">function</span>(){<span
                                                    class="cm-keyword">return</span> <span
                                                    class="cm-operator">!</span><span
                                                    class="cm-variable">Recorder</span>.<span
                                                    class="cm-property">lamejs</span>}}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">174
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">url</span>:<span
                                                    class="cm-variable">RootFolder</span><span
                                                    class="cm-operator">+</span><span class="cm-string">"/src/engine/wav.js"</span>,<span
                                                    class="cm-property">check</span>:<span
                                                    class="cm-keyword">function</span>(){<span
                                                    class="cm-keyword">return</span> <span
                                                    class="cm-operator">!</span><span
                                                    class="cm-variable">Recorder</span>.<span class="cm-property">prototype</span>.<span
                                                    class="cm-property">wav</span>}}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">175
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">]);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">176
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">177
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//显示控制按钮</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">178
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Ctrls</span>([</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">179
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>{<span
                                                    class="cm-property">name</span>:<span
                                                    class="cm-string">"开始录音和传输mp3"</span>,<span
                                                    class="cm-property">click</span>:<span
                                                    class="cm-string">"recStart"</span>}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">180
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">name</span>:<span
                                                    class="cm-string">"停止录音"</span>,<span
                                                    class="cm-property">click</span>:<span
                                                    class="cm-string">"recStop"</span>}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">181
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,{<span
                                                    class="cm-property">name</span>:<span
                                                    class="cm-string">"合并日志中所有mp3"</span>,<span
                                                    class="cm-property">click</span>:<span class="cm-string">"testLogsMergeAll"</span>}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">182
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">]);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">183
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">184
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">185
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//简单的合并相同参数的文件，更好的实现请参考《【Demo库】【文件合并】-mp3多个片段文件合并》</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">186
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">mp3Merge</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(<span
                                                    class="cm-def">fileBytesList</span>,<span
                                                    class="cm-def">bitRate</span>,<span
                                                    class="cm-def">True</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">187
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//计算所有文件总长度</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">188
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">size</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">189
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;<span
                                                    class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable-2">fileBytesList</span>.<span
                                                    class="cm-property">length</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">190
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">size</span><span class="cm-operator">+=</span><span
                                                    class="cm-variable-2">fileBytesList</span>[<span
                                                    class="cm-variable-2">i</span>].<span
                                                    class="cm-property">byteLength</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">191
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">192
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">193
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//全部直接拼接到一起</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">194
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">fileBytes</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-keyword">new</span> <span
                                                    class="cm-variable">Uint8Array</span>(<span class="cm-variable-2">size</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">195
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">pos</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">196
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">for</span>(<span
                                                    class="cm-keyword">var</span> <span class="cm-def">i</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;<span
                                                    class="cm-variable-2">i</span><span
                                                    class="cm-operator">&lt;</span><span class="cm-variable-2">fileBytesList</span>.<span
                                                    class="cm-property">length</span>;<span
                                                    class="cm-variable-2">i</span><span class="cm-operator">++</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">197
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">bytes</span><span
                                                    class="cm-operator">=</span><span class="cm-variable-2">fileBytesList</span>[<span
                                                    class="cm-variable-2">i</span>];</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">198
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">fileBytes</span>.<span
                                                    class="cm-property">set</span>(<span
                                                    class="cm-variable-2">bytes</span>,<span
                                                    class="cm-variable-2">pos</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">199
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">pos</span><span
                                                    class="cm-operator">+=</span><span
                                                    class="cm-variable-2">bytes</span>.<span class="cm-property">byteLength</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">200
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">201
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">202
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//计算合并后的总时长</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">203
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">duration</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Math</span>.<span
                                                    class="cm-property">round</span>(<span
                                                    class="cm-variable-2">size</span><span
                                                    class="cm-operator">*</span><span class="cm-number">8</span><span
                                                    class="cm-operator">/</span><span
                                                    class="cm-variable-2">bitRate</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">204
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">205
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">True</span>(<span class="cm-variable-2">fileBytes</span>,<span
                                                    class="cm-variable-2">duration</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">206
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">207
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//合并日志中的所有mp3文件成一个文件</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">208
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">testLogsMergeAll</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">209
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">audios</span><span class="cm-operator">=</span><span
                                                    class="cm-variable">Runtime</span>.<span class="cm-property">LogAudios</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">210
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">211
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">bitRate</span><span class="cm-operator">=</span><span
                                                    class="cm-variable">testBitRate</span>,<span class="cm-def">sampleRate</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">testSampleRate</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">212
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">idx</span><span
                                                    class="cm-operator">=-</span><span class="cm-number">1</span> <span
                                                    class="cm-operator">+</span><span class="cm-number">1</span>,<span
                                                    class="cm-def">files</span><span
                                                    class="cm-operator">=</span>[],<span
                                                    class="cm-def">exclude</span><span class="cm-operator">=</span><span
                                                    class="cm-number">0</span>,<span
                                                    class="cm-def">badConfig</span><span
                                                    class="cm-operator">=</span><span class="cm-number">0</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">213
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">read</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">214
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">idx</span><span class="cm-operator">++</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">215
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">idx</span><span
                                                    class="cm-operator">&gt;=</span><span
                                                    class="cm-variable-2">audios</span>.<span
                                                    class="cm-property">length</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">216
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">tips</span><span
                                                    class="cm-operator">=</span>(<span
                                                    class="cm-variable-2">exclude</span><span
                                                    class="cm-operator">?</span><span class="cm-string">"，已排除"</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">exclude</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-string">"个非mp3文件"</span>:<span
                                                    class="cm-string">""</span>)</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">217
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-operator">+</span>(<span
                                                    class="cm-variable-2">badConfig</span><span
                                                    class="cm-operator">?</span><span class="cm-string">"，已排除"</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-variable-2">badConfig</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-string">"个参数不同mp3文件"</span>:<span
                                                    class="cm-string">""</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">218
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-operator">!</span><span
                                                    class="cm-variable-2">files</span>.<span
                                                    class="cm-property">length</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">219
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Log</span>(<span
                                                    class="cm-string">"至少需要录1段mp3"</span><span
                                                    class="cm-operator">+</span><span class="cm-variable-2">tips</span>,<span
                                                    class="cm-number">1</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">220
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">return</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">221
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">222
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">mp3Merge</span>(<span class="cm-variable-2">files</span>,<span
                                                    class="cm-variable-2">bitRate</span>,<span class="cm-keyword">function</span>(<span
                                                    class="cm-def">file</span>,<span
                                                    class="cm-def">duration</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">223
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Log</span>(<span class="cm-string">"合并"</span><span
                                                    class="cm-operator">+</span><span class="cm-variable-2">files</span>.<span
                                                    class="cm-property">length</span><span
                                                    class="cm-operator">+</span><span
                                                    class="cm-string">"个成功"</span><span
                                                    class="cm-operator">+</span><span class="cm-variable-2">tips</span>,<span
                                                    class="cm-number">2</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">224
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span class="cm-property">LogAudio</span>(<span
                                                    class="cm-keyword">new</span> <span class="cm-variable">Blob</span>([<span
                                                    class="cm-variable-2">file</span>.<span
                                                    class="cm-property">buffer</span>],{<span
                                                    class="cm-property">type</span>:<span
                                                    class="cm-string">"audio/mp3"</span>}),<span class="cm-variable-2">duration</span>,{<span
                                                    class="cm-property">set</span>:{</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">225
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-property">type</span>:<span class="cm-string">"mp3"</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">226
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">bitRate</span>:<span class="cm-variable-2">bitRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">227
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">sampleRate</span>:<span class="cm-variable-2">sampleRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">228
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>}},<span class="cm-string">"已合并"</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">229
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">230
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">return</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">231
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">232
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">233
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">logItem</span><span class="cm-operator">=</span><span
                                                    class="cm-variable-2">audios</span>[<span
                                                    class="cm-variable-2">idx</span>],<span class="cm-def">logSet</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable-2">logItem</span>.<span
                                                    class="cm-property">set</span><span class="cm-operator">||</span>{};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">234
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-operator">!</span><span
                                                    class="cm-string-2">/mp3/</span>.<span
                                                    class="cm-property">test</span>(<span
                                                    class="cm-variable-2">logItem</span>.<span
                                                    class="cm-property">blob</span>.<span
                                                    class="cm-property">type</span>)){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">235
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">exclude</span><span
                                                    class="cm-operator">++</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">236
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">read</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">237
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">return</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">238
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">239
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span
                                                    class="cm-variable-2">bitRate</span><span
                                                    class="cm-operator">!=</span><span
                                                    class="cm-variable-2">logSet</span>.<span class="cm-property">bitRate</span> <span
                                                    class="cm-operator">||</span> <span
                                                    class="cm-variable-2">sampleRate</span><span
                                                    class="cm-operator">!=</span><span
                                                    class="cm-variable-2">logSet</span>.<span class="cm-property">sampleRate</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">240
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">badConfig</span><span
                                                    class="cm-operator">++</span>;<span class="cm-comment">//音频参数不一致的，不合并</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">241
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">read</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">242
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">return</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">243
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">244
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">245
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">reader</span><span class="cm-operator">=</span><span
                                                    class="cm-keyword">new</span> <span
                                                    class="cm-variable">FileReader</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">246
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">reader</span>.<span class="cm-property">onloadend</span><span
                                                    class="cm-operator">=</span><span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">247
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">files</span>.<span
                                                    class="cm-property">push</span>(<span class="cm-keyword">new</span> <span
                                                    class="cm-variable">Uint8Array</span>(<span class="cm-variable-2">reader</span>.<span
                                                    class="cm-property">result</span>));</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">248
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">read</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">249
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">250
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">reader</span>.<span class="cm-property">readAsArrayBuffer</span>(<span
                                                    class="cm-variable-2">logItem</span>.<span
                                                    class="cm-property">blob</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">251
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">252
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable-2">read</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">253
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">254
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">255
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">256
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">257
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    cm-text="">&ZeroWidthSpace;</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">258
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-comment">//调用录音</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">259
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">var</span> <span
                                                    class="cm-def">rec</span>;</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">260
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">function</span> <span
                                                    class="cm-def">recStart</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">261
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">if</span>(<span class="cm-variable">rec</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">262
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">rec</span>.<span
                                                    class="cm-property">close</span>();</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">263
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">264
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">265
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">rec</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">Recorder</span>({</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">266
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-property">type</span>:<span class="cm-string">"mp3"</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">267
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">sampleRate</span>:<span class="cm-variable">testSampleRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">268
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">bitRate</span>:<span class="cm-variable">testBitRate</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">269
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">onProcess</span>:<span class="cm-keyword">function</span>(<span
                                                    class="cm-def">buffers</span>,<span class="cm-def">powerLevel</span>,<span
                                                    class="cm-def">bufferDuration</span>,<span class="cm-def">bufferSampleRate</span>,<span
                                                    class="cm-def">newBufferIdx</span>,<span
                                                    class="cm-def">asyncEnd</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">270
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Process</span>.<span
                                                    class="cm-property">apply</span>(<span
                                                    class="cm-atom">null</span>,<span
                                                    class="cm-variable-2">arguments</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">271
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">272
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">RealTimeOnProcessClear</span>(<span
                                                    class="cm-variable-2">buffers</span>,<span class="cm-variable-2">powerLevel</span>,<span
                                                    class="cm-variable-2">bufferDuration</span>,<span
                                                    class="cm-variable-2">bufferSampleRate</span>,<span
                                                    class="cm-variable-2">newBufferIdx</span>,<span
                                                    class="cm-variable-2">asyncEnd</span>);<span class="cm-comment">//实时数据处理，清理内存</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">273
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">274
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>,<span
                                                    class="cm-property">takeoffEncodeChunk</span>:<span
                                                    class="cm-keyword">function</span>(<span
                                                    class="cm-def">chunkBytes</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">275
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-comment">//接管实时转码，推入实时处理</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">276
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">RealTimeSendTry</span>(<span
                                                    class="cm-variable-2">chunkBytes</span>,<span
                                                    class="cm-atom">false</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">277
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>}</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">278
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">279
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">280
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-keyword">var</span> <span class="cm-def">t</span><span
                                                    class="cm-operator">=</span><span
                                                    class="cm-variable">setTimeout</span>(<span class="cm-keyword">function</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">281
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Log</span>(<span class="cm-string">"无法录音：权限请求被忽略（超时假装手动点击了确认对话框）"</span>,<span
                                                    class="cm-number">1</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">282
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>},<span
                                                    class="cm-number">8000</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">283
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">284
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">rec</span>.<span class="cm-property">open</span>(<span
                                                    class="cm-keyword">function</span>(){<span class="cm-comment">//打开麦克风授权获得相关资源</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">285
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">clearTimeout</span>(<span class="cm-variable-2">t</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">286
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">rec</span>.<span
                                                    class="cm-property">start</span>();<span
                                                    class="cm-comment">//开始录音</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">287
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">288
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">RealTimeSendTryReset</span>();<span
                                                    class="cm-comment">//重置环境，开始录音时必须调用一次</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">289
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span>},<span
                                                    class="cm-keyword">function</span>(<span
                                                    class="cm-def">msg</span>,<span class="cm-def">isUserNotAllow</span>){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">290
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">clearTimeout</span>(<span class="cm-variable-2">t</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">291
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">Runtime</span>.<span
                                                    class="cm-property">Log</span>((<span class="cm-variable-2">isUserNotAllow</span><span
                                                    class="cm-operator">?</span><span
                                                    class="cm-string">"UserNotAllow，"</span>:<span
                                                    class="cm-string">""</span>)<span class="cm-operator">+</span><span
                                                    class="cm-string">"无法录音:"</span><span
                                                    class="cm-operator">+</span><span class="cm-variable-2">msg</span>, <span
                                                    class="cm-number">1</span>);</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">292
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation"
                                                    cm-text="	">    </span>});</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">293
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">294
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-keyword">function</span> <span
                                                    class="cm-def">recStop</span>(){</span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">295
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">rec</span>.<span
                                                    class="cm-property">close</span>();<span class="cm-comment">//直接close掉即可，这个例子不需要获得最终的音频文件</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">296
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     class="cm-tab-wrap-hack"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">297
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                                                    class="cm-tab" role="presentation" cm-text="	">    </span><span
                                                    class="cm-variable">RealTimeSendTry</span>(<span class="cm-atom">null</span>,<span
                                                    class="cm-atom">true</span>);<span
                                                    class="cm-comment">//最后一次发送</span></span></pre>
                                        </div>
                                        <div style="position: relative;">
                                            <div class="CodeMirror-gutter-wrapper" style="left: -33px;">
                                                <div class="CodeMirror-linenumber CodeMirror-gutter-elt"
                                                     style="left: 0px; width: 24px;">298
                                                </div>
                                            </div>
                                            <pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">};</span></pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 5147px;"></div>
                    <div class="CodeMirror-gutters" style="height: 5177px; left: 0px;">
                        <div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 32px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mainCodeBtn" style="padding-top:12px">
            <button class="mainBtn" onclick="Runtime.CodeRunClick()" style="padding:0 40px">运行</button>
            <button class="mainBtn" onclick="Runtime.CodePubClick()">分发源码</button>
        </div>
    </div>

    <div class="mainBox mainCtrl" style="">
        <div style="padding-bottom:12px">
            <div style="border:1px solid #ccc;display:inline-block;vertical-align:bottom">
                <div style="height:100px;width:300px;" class="ctrlProcessWave">
                    <div style="font-size: 0px;">
                        <canvas style="width:100%;height:100%;" width="600" height="200"></canvas>
                    </div>
                </div>
            </div>
            <div style="width:300px;display:inline-block;vertical-align:bottom">
                <div style="height:40px;width:300px;display:inline-block;background:#999;position:relative;margin-bottom:12px">
                    <div class="ctrlProcessX"
                         style="height: 40px; background: rgb(0, 187, 17); position: absolute; width: 0%;"></div>
                    <div class="ctrlProcessT" style="padding-left:50px; line-height:40px; position: relative;">00:03″550
                        / 0
                    </div>
                </div>

                <span style="font-size:0">
					<span class="recwaveChoice slc" key="WaveView">WaveView</span>
					<span class="recwaveChoice" key="SurferView">SurferView</span>
					<span class="recwaveChoice" key="Histogram1">Histogram1</span>
					<span class="recwaveChoice" key="Histogram2">H...2</span>
					<span class="recwaveChoice" key="Histogram3">H...3</span>
				</span>
            </div>
        </div>

        <div class="ctrlBtns">
            <button class="mainBtn undefined" onclick="recStart()">开始录音和传输mp3</button>
            <button class="mainBtn undefined" onclick="recStop()">停止录音</button>
            <button class="mainBtn undefined" onclick="testLogsMergeAll()">合并日志中所有mp3</button>
            <button class="mainBtn undefined" onclick="Runtime.LogClear()">清除日志</button>
        </div>
    </div>

    <div class="mainBox mainLogBox">
        <audio class="LogAudioPlayer" controls="" style="display:none;width:100%"></audio>
        <div class="mainLog">
            <div style="color:">[23:54:23]已合并:16kbps 16000hz 7056b [mp3]03″528ms
                <button onclick="Runtime.LogAudioDown('11')">下载</button>
                <button onclick="Runtime.LogAudioPlay('11')">播放</button>
                <span class="p11"></span> <span class="LogAudio_11"></span></div>
            <div style="color:#0b1">[23:54:23]合并10个成功</div>
            <div style="color:">[23:54:22]No.010:已停止传输</div>
            <div style="color:">[23:54:22]No.010:16kbps 16000hz 576b [mp3]288ms
                <button onclick="Runtime.LogAudioDown('10')">下载</button>
                <button onclick="Runtime.LogAudioPlay('10')">播放</button>
                <span class="p10"></span> <span class="LogAudio_10"></span></div>
            <div style="color:">[23:54:22]No.009:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('9')">下载</button>
                <button onclick="Runtime.LogAudioPlay('9')">播放</button>
                <span class="p9"></span> <span class="LogAudio_9"></span></div>
            <div style="color:">[23:54:21]No.008:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('8')">下载</button>
                <button onclick="Runtime.LogAudioPlay('8')">播放</button>
                <span class="p8"></span> <span class="LogAudio_8"></span></div>
            <div style="color:">[23:54:21]No.007:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('7')">下载</button>
                <button onclick="Runtime.LogAudioPlay('7')">播放</button>
                <span class="p7"></span> <span class="LogAudio_7"></span></div>
            <div style="color:">[23:54:21]No.006:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('6')">下载</button>
                <button onclick="Runtime.LogAudioPlay('6')">播放</button>
                <span class="p6"></span> <span class="LogAudio_6"></span></div>
            <div style="color:">[23:54:20]No.005:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('5')">下载</button>
                <button onclick="Runtime.LogAudioPlay('5')">播放</button>
                <span class="p5"></span> <span class="LogAudio_5"></span></div>
            <div style="color:">[23:54:20]No.004:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('4')">下载</button>
                <button onclick="Runtime.LogAudioPlay('4')">播放</button>
                <span class="p4"></span> <span class="LogAudio_4"></span></div>
            <div style="color:">[23:54:19]No.003:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('3')">下载</button>
                <button onclick="Runtime.LogAudioPlay('3')">播放</button>
                <span class="p3"></span> <span class="LogAudio_3"></span></div>
            <div style="color:">[23:54:19]No.002:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('2')">下载</button>
                <button onclick="Runtime.LogAudioPlay('2')">播放</button>
                <span class="p2"></span> <span class="LogAudio_2"></span></div>
            <div style="color:">[23:54:19]No.001:16kbps 16000hz 720b [mp3]360ms
                <button onclick="Runtime.LogAudioDown('1')">下载</button>
                <button onclick="Runtime.LogAudioPlay('1')">播放</button>
                <span class="p1"></span> <span class="LogAudio_1"></span></div>
            <div style="color:#0b1">[23:54:14]代码已运行</div>
            <div style="color:red">[23:54:13]代码开始运行，请勿操作...</div>
            <div style="color:#0b1">[23:54:02]已加载《【教程】【音频流】【上传】实时转码并上传-mp3专版》源码，可运行查看效果
            </div>
            <div style="color:#f60;font-weight:bold">
                [23:54:02]注意：编辑框内的代码是由本工具提供的运行环境支持，如果要copy代码到其他html内使用，需要把Runtime相关的调用删除或使用别的代码代替。
            </div>
            <div style="color:">[23:54:02]正在加载runtime-codes/teach.realtime.encode_transfer_mp3.js...</div>
        </div>
        <div class="mainLastLog"
             style="position:fixed;z-index:2;width:20vw;min-width:200px;max-height:100px;overflow:auto;right:0;bottom:0;background:#fff;padding:5px 10px;border-radius:6px 0 0 0;box-shadow:-1px -1px 3px #ddd;font-size:13px">
            <div style="color:">[23:54:23]已合并:16kbps 16000hz 7056b [mp3]03″528ms
                <button onclick="Runtime.LogAudioDown('11')">下载</button>
                <button onclick="Runtime.LogAudioPlay('11')">播放</button>
                <span clazz="p11"></span> <span clazz="LogAudio_11"></span></div>
        </div>
        <div class="DonateView"></div>
    </div>

    <div class="mainBox">
        <div><span style="font-size:22px; color:#f60">Demo 列表</span> 点击编辑和运行</div>
        <div class="demoList">
            <div style="padding:8px 0">1. <a href="?idf=self_base_demo" onclick="Runtime.UseDemoCode(0,1);return false">【教程】本工具使用示例，和Recorder基础用法</a>
            </div>
            <div style="padding:8px 0">2. <a href="?jsname=lib.transform.mp32other"
                                             onclick="Runtime.UseDemoCode(1,1);return false">【Demo库】【格式转换】-mp3等格式解码转成其他格式</a>
            </div>
            <div style="padding:8px 0">3. <a href="?jsname=lib.transform.wav2other"
                                             onclick="Runtime.UseDemoCode(2,1);return false">【Demo库】【格式转换】-wav格式转成其他格式</a>
            </div>
            <div style="padding:8px 0">4. <a href="?jsname=lib.transform.amr2other"
                                             onclick="Runtime.UseDemoCode(3,1);return false">【Demo库】【格式转换】-amr格式转成其他格式</a>
            </div>
            <div style="padding:8px 0">5. <a href="?jsname=teach.realtime.encode_transfer"
                                             onclick="Runtime.UseDemoCode(4,1);return false">【教程】【音频流】【上传】实时转码并上传-通用版</a>
            </div>
            <div style="padding:8px 0">6. <a href="?jsname=teach.realtime.encode_transfer_mp3"
                                             onclick="Runtime.UseDemoCode(5,1);return false">【教程】【音频流】【上传】实时转码并上传-mp3专版</a>
            </div>
            <div style="padding:8px 0">7. <a href="?jsname=teach.realtime.encode_transfer_frame_pcm"
                                             onclick="Runtime.UseDemoCode(6,1);return false">【教程】【音频流】【上传】实时转码并上传-pcm固定帧大小</a>
            </div>
            <div style="padding:8px 0">8. <a href="?jsname=teach.realtime.decode_buffer_stream_player"
                                             onclick="Runtime.UseDemoCode(7,1);return false">【教程】【音频流】【播放】实时解码播放音频片段</a>
            </div>
            <div style="padding:8px 0">9. <a href="?jsname=teach.realtime.asr.aliyun.short"
                                             onclick="Runtime.UseDemoCode(8,1);return false">【教程】【ASR】实时语音识别、音频文件转文字-阿里云版</a>
            </div>
            <div style="padding:8px 0">10. <a href="?jsname=teach.source_stream.capture_stream"
                                              onclick="Runtime.UseDemoCode(9,1);return false">【教程】实时录制处理audio、video标签的captureStream流</a>
            </div>
            <div style="padding:8px 0">11. <a href="?jsname=lib.merge.mp3_merge"
                                              onclick="Runtime.UseDemoCode(10,1);return false">【Demo库】【文件合并】-mp3多个片段文件合并</a>
            </div>
            <div style="padding:8px 0">12. <a href="?jsname=lib.merge.wav_merge"
                                              onclick="Runtime.UseDemoCode(11,1);return false">【Demo库】【文件合并】-wav多个片段文件合并</a>
            </div>
            <div style="padding:8px 0">13. <a href="?jsname=teach.realtime.mix_multiple"
                                              onclick="Runtime.UseDemoCode(12,1);return false">【教程】实时多路音频混音</a>
            </div>
            <div style="padding:8px 0">14. <a href="?jsname=teach.sonic.transform"
                                              onclick="Runtime.UseDemoCode(13,1);return false">【教程】变速变调音频转换</a>
            </div>
            <div style="padding:8px 0">15. <a href="?jsname=teach.env_in.follow"
                                              onclick="Runtime.UseDemoCode(14,1);return false">【教程】新录音从老录音接续、或录制中途插入音频</a>
            </div>
            <div style="padding:8px 0">16. <a href="?jsname=teach.dtmf.decode_and_encode"
                                              onclick="Runtime.UseDemoCode(15,1);return false">【教程】DTMF（电话拨号按键信号）解码、编码</a>
            </div>
            <div style="padding:8px 0">17. <a href="?jsname=lib.samplerate.raise"
                                              onclick="Runtime.UseDemoCode(16,1);return false">【Demo库】PCM采样率提升</a>
            </div>
            <div style="padding:8px 0">18. <a href="?jsname=dsp.lib.filter.iir"
                                              onclick="Runtime.UseDemoCode(17,1);return false">【Demo库】【信号处理】IIR低通、高通滤波</a>
            </div>
            <div style="padding:8px 0">19. <a href="?jsname=dsp.test.fft.analysis"
                                              onclick="Runtime.UseDemoCode(18,1);return false">【测试】【信号处理】FFT频域分析ECharts频谱曲线图</a>
            </div>
            <div style="padding:8px 0">20. <a href="?jsname=test.webm.extract_audio"
                                              onclick="Runtime.UseDemoCode(19,1);return false">【测试】WebM格式解析并提取音频</a>
            </div>
            <div style="padding:8px 0">21. <a href="?jsname=test.g7xx.engine"
                                              onclick="Runtime.UseDemoCode(20,1);return false">【测试】G711、G72X编码和解码播放</a>
            </div>
            <div style="padding:8px 0">22. <a href="?jsname=test.create-audio.nmn2pcm"
                                              onclick="Runtime.UseDemoCode(21,1);return false">【测试】音乐合成-用波形函数将歌曲简谱文本转成PCM</a>
            </div>
            <div style="padding:8px 0">23. <a href="?jsname=test.extensions.visualization"
                                              onclick="Runtime.UseDemoCode(22,1);return false">【测试】音频可视化相关插件测试</a>
            </div>
            <div style="padding:8px 0">24. <a href="?idf=self_trust" onclick="Runtime.UseDemoCode(23,1);return false">【工具】TrustRSARoots作者公钥认证</a>
            </div>
        </div>
    </div>

    <div class="mainBox">
        <div>
            如果你有蛮有意思的有价值代码片段，欢迎把代码放到assets/runtime-codes目录内提交PR，我们共同丰富这个Demo列表😜
        </div>
    </div>
</div>


<script>
    (function () {
        var WaveViewBak = Recorder.WaveView;
        var WaveSurferViewBak = Recorder.WaveSurferView;
        var LibFFTBak = Recorder.LibFFT;
        var FrequencyHistogramViewBak = Recorder.FrequencyHistogramView;
        var LogAudios = [0];

        window.NOOP = function () {
        };
        window.RootFolder = "..";
        window.Runtime = {
            LogAudios: LogAudios

            /*注册显示的控制按钮*/
            , Ctrls: function (ctrls) {
                this._ctrls = ctrls;
                ctrls.push({name: "清除日志", click: "Runtime.LogClear"});

                var html = [];
                for (var i = 0; i < ctrls.length; i++) {
                    var o = ctrls[i];
                    if (o.html) {
                        html.push(o.html);
                    } else if (o.choiceFile) {
                        Runtime.ViewChoiceFile(o.choiceFile);
                    } else {
                        html.push('<button class="mainBtn ' + o.cls + '" onclick="' + o.click + '()">' + o.name + '</button>');
                    }
                    ;
                }
                ;
                $(".ctrlBtns").html(html.join("\n"));
            }

            , Import: function (jsList, win) {
                win = win || window;
                var doc = win.document;
                var load = function (idx) {
                    if (idx >= jsList.length) {
                        Runtime.CodeRunClick(1);
                        return;
                    }
                    ;
                    var itm = jsList[idx];
                    var url = itm.url;
                    if (itm.check() === false) {
                        load(idx + 1);
                        return;
                    }
                    ;

                    var elem = doc.createElement("script");
                    elem.setAttribute("type", "text/javascript");
                    elem.setAttribute("src", url);
                    elem.onload = function () {
                        load(idx + 1);
                    };
                    elem.onerror = function (e) {
                        Runtime.Log("请求失败:" + (e.message || "-") + "，" + url, 1);
                    };
                    doc.body.appendChild(elem);
                };
                setTimeout(function () {
                    load(0);
                });

                Runtime.CodeRunImport();
            }

            , Process: function (buffers, powerLevel, bufferDuration, bufferSampleRate) {
                Recorder.WaveView = WaveViewBak;
                Recorder.WaveSurferView = WaveSurferViewBak;
                Recorder.LibFFT = LibFFTBak;
                Recorder.FrequencyHistogramView = FrequencyHistogramViewBak;
                var waveStore = Runtime.WaveStore;
                if (!waveStore) {
                    waveStore = Runtime.WaveStore = {};
                    waveStore.WaveView = Recorder.WaveView({elem: ".ctrlProcessWave"});
                    waveStore.SurferView = Recorder.WaveSurferView({elem: ".ctrlProcessWave"});
                    waveStore.Histogram1 = Recorder.FrequencyHistogramView({elem: ".ctrlProcessWave"});
                    waveStore.Histogram2 = Recorder.FrequencyHistogramView({
                        elem: ".ctrlProcessWave"
                        , lineCount: 90
                        , position: 0
                        , minHeight: 1
                        , stripeEnable: false
                    });
                    waveStore.Histogram3 = Recorder.FrequencyHistogramView({
                        elem: ".ctrlProcessWave"
                        , lineCount: 20
                        , position: 0
                        , minHeight: 1
                        , fallDuration: 400
                        , stripeEnable: false
                        , mirrorEnable: true
                        , linear: [0, "#0ac", 1, "#0ac"]
                    });
                }
                ;

                $(".ctrlProcessX").css("width", powerLevel + "%");
                $(".ctrlProcessT").text(formatMs(bufferDuration, 1) + " / " + powerLevel);

                //可视化图形绘制
                if (waveStore.choice != recwaveChoiceKey) {
                    waveStore.choice = recwaveChoiceKey;
                    $(".ctrlProcessWave").html("").append(waveStore[recwaveChoiceKey].elem);
                }
                ;
                waveStore[recwaveChoiceKey].input(buffers[buffers.length - 1], powerLevel, bufferSampleRate);
            }

            , ReadBlob: function (blob, call) {
                var reader = new FileReader();
                reader.onloadend = function (e) {
                    call(reader.result);
                };
                reader.readAsArrayBuffer(blob);
            }
            , DecodeAudio: function (fileName, arrayBuffer, True, False) {
                True = True || NOOP;
                False = False || NOOP;
                if (!Recorder.GetContext()) {//强制激活Recorder.Ctx 不支持大概率也不支持解码
                    False("浏览器不支持音频解码");
                    return;
                }
                ;
                var type = (/[^.]+$/.exec(fileName) || [])[0] || "";
                var srcBlob = new Blob([arrayBuffer], {type: type && ("audio/" + type) || ""});

                var ctx = Recorder.Ctx;
                ctx.decodeAudioData(arrayBuffer, function (raw) {
                    var src = raw.getChannelData(0);
                    var sampleRate = raw.sampleRate;
                    console.log(fileName, raw, srcBlob);

                    var pcm = new Int16Array(src.length);
                    for (var i = 0; i < src.length; i++) {//floatTo16BitPCM
                        var s = Math.max(-1, Math.min(1, src[i]));
                        s = s < 0 ? s * 0x8000 : s * 0x7FFF;
                        pcm[i] = s;
                    }
                    ;

                    True({
                        sampleRate: sampleRate
                        , duration: Math.round(src.length / sampleRate * 1000)
                        , srcBlob: srcBlob
                        , type: type
                        , data: pcm
                    });
                }, function (e) {
                    console.error("audio解码失败", e);
                    False(fileName + "解码失败:" + (e && e.message || "-"));
                });
            }

            /*显示日志内容，color:0默认，1红色，2绿色，其他指定颜色*/
            , Log: function (msg, color) {
                var now = new Date();
                var t = ("0" + now.getHours()).substr(-2)
                    + ":" + ("0" + now.getMinutes()).substr(-2)
                    + ":" + ("0" + now.getSeconds()).substr(-2);
                var html = '<div style="color:' + (!color ? "" : color == 1 ? "red" : color == 2 ? "#0b1" : color) + '">[' + t + ']' + msg + '</div>';
                $(".mainLog").prepend(html);
                $(".mainLastLog").html(html.replace(/class\s*=/ig, "clazz="));
            }
            , LogAudio: function (blob, duration, rec, msg) {
                var set = rec && rec.set || {};
                var id = LogAudios.length;
                LogAudios.push({blob: blob, set: $.extend({}, set), duration: duration});

                Runtime.Log((msg || "已录制") + ":" + (set.bitRate || "-") + "kbps " + (set.sampleRate || "-") + "hz " + blob.size + "b [" + (set.type || "-") + "]" + formatMs(duration || 0) + 'ms <button onclick="Runtime.LogAudioDown(\'' + id + '\')">下载</button> <button onclick="Runtime.LogAudioPlay(\'' + id + '\')">播放</button> <span class="p' + id + '"></span> <span class="LogAudio_' + id + '"></span>');
            }
            , LogClear: function () {
                $(".mainLog").html("");
                $(".mainLastLog").html("");
                LogAudios.length = 1;
            }
        };
        var formatMs = function (ms, all) {
            var ss = ms % 1000;
            ms = (ms - ss) / 1000;
            var s = ms % 60;
            ms = (ms - s) / 60;
            var m = ms % 60;
            ms = (ms - m) / 60;
            var h = ms;
            var t = (h ? h + ":" : "")
                + (all || h + m ? ("0" + m).substr(-2) + ":" : "")
                + (all || h + m + s ? ("0" + s).substr(-2) + "″" : "")
                + ("00" + ss).substr(-3);
            return t;
        };


        var recwaveChoiceKey = localStorage["RecWaveChoiceKey"] || "WaveView";
        $(".recwaveChoice").bind("click", function (e) {
            var elem = $(e.target);
            $(".recwaveChoice").removeClass("slc");
            var val = elem.addClass("slc").attr("key");

            recwaveChoiceKey = val;
            localStorage["RecWaveChoiceKey"] = recwaveChoiceKey;
        });
        if (!$(".recwaveChoice[key=" + recwaveChoiceKey + "]").length) {
            recwaveChoiceKey = "WaveView";
        }
        ;
        $(".recwaveChoice[key=" + recwaveChoiceKey + "]").click();


        $(window).bind("error", function (e) {
            Runtime.Log('【Error】:<pre>' + (e.error ? e.error.stack : event.message) + '</pre>', 1);
        });
    })();
</script>


<script>
    (function () {
        var codeRunCtrl;
        Runtime.CodeRunImport = function () {
            if (codeRunCtrl == 1) {
                codeRunCtrl = 2;
                throw new Error("kill");
            }
            ;
        };
        Runtime.CodeRunClick = function (isImport) {
            $(".mainCtrl").show();

            if (!isImport) {
                codeRunCtrl = 1;
            }
            ;
            if (codeRunCtrl == 1) {
                Runtime.Log("代码开始运行，请勿操作...", 1);
            }
            ;
            if (codeRunCtrl == 3) {
                return;
            }
            ;
            if (codeRunCtrl == 2) {
                codeRunCtrl = 3;
            }
            ;

            try {
                var code = $(".codeEdit").val();
                window.eval(code);
                Runtime.Log("代码已运行", 2);
            } catch (e) {
                if (e.message.indexOf("kill") + 1) {
                    return;
                }
                ;
                Runtime.Log("运行出错:" + e.message + "<pre>" + e.stack + "</pre>", 1);
            }
            ;
        };


        Runtime.LogAudioPlay = function (id) {
            var audio = $(".LogAudioPlayer")[0];
            audio.style.display = "inline-block";
            if (!(audio.ended || audio.paused)) {
                audio.pause();
            }
            ;

            var o = Runtime.LogAudios[id];
            if (o) {
                o.play = (o.play || 0) + 1;
                var logmsg = function (msg) {
                    $(".LogAudio_" + id).html('<span style="color:green">' + o.play + '</span> ' + new Date().toLocaleTimeString() + " " + msg);
                };
                logmsg("");
                audio.onerror = function (e) {
                    console.log(arguments)
                    logmsg('<span style="color:red">播放失败</span>');
                };

                var end = function (blob) {
                    audio.src = (window.URL || webkitURL).createObjectURL(blob);
                    audio.play();
                };
                var wav = Recorder[o.set.type + "2wav"];
                if (wav) {
                    logmsg("正在转码成wav...");
                    var wavData = o.blob;
                    if (o.set.type == "pcm") {
                        wavData = {
                            sampleRate: o.set.sampleRate
                            , bitRate: o.set.bitRate
                            , blob: o.blob
                        };
                    }
                    ;
                    wav(wavData, function (blob) {
                        end(blob);
                        logmsg("已转码成wav播放");
                    }, function (msg) {
                        logmsg('<span style="color:red">转码成wav失败：' + msg + '</span>');
                    });
                } else {
                    end(o.blob);
                }
                ;
            }
            ;
        };
        var Rnd = 0;
        Runtime.LogAudioDown = function (id) {
            var o = Runtime.LogAudios[id];
            if (o) {
                var cls = "LogAudioInfo" + (++Rnd);
                var name = "rec-" + o.duration + "ms-" + (o.set.bitRate || "-") + "kbps-" + (o.set.sampleRate || "-") + "hz." + (o.set.type || (/\w+$/.exec(o.blob.type) || [])[0] || "unknown");

                o.down = (o.down || 0) + 1;
                $(".LogAudio_" + id).html('<span style="color:red">' + o.down + '</span> 点击 <span class="' + cls + '"> 下载，或复制文本<button onclick="Runtime.LogAudioDown64(\'' + id + '\',\'' + cls + '\')">生成Base64文本</button></span>');

                var downA = document.createElement("A");
                downA.innerHTML = "下载 " + name;
                downA.href = (window.URL || webkitURL).createObjectURL(o.blob);
                downA.download = name;
                $("." + cls).prepend(downA);
                if (!/mobile/i.test(navigator.userAgent)) {
                    downA.click(); //某些软件内会跳转页面到恶心推广页
                }
            }
            ;
        };
        Runtime.LogAudioDown64 = function (key, cls) {
            var o = Runtime.LogAudios[key];

            var reader = new FileReader();
            reader.onloadend = function () {
                var id = "LogAudioInfoB64" + (++Rnd);
                $("." + cls).append('<textarea class="' + id + '"></textarea>');
                $("." + id).val(reader.result);
            };
            reader.readAsDataURL(o.blob);
        };


        Runtime.ViewChoiceFile = function (set) {
            set = $.extend({
                multiple: true
                , name: "音乐"
                , title: "转换"
                , mime: "audio/*"
                , process: NOOP //fn(fileName,arrayBuffer,filesCount,fileIdx,endCall)
                , keepOther: false
                , cls: "RuntimeChoiceFile_" + (++Rnd)
            }, set);

            var cls = set.cls;
            if (!set.keepOther) {
                $(".RuntimeChoiceFileBox").remove();
            }
            Runtime.Log('\
<div class="RuntimeChoiceFileBox ' + cls + '">\
	<div class="RuntimeChoiceDropFile" onclick="$(\'.' + cls + ' .RuntimeChoiceFile\').click()" style="border: 3px dashed #a2a1a1;background:#eee; padding:30px 0; text-align:center;cursor: pointer;">\
	拖拽' + (set.multiple ? "多" : "一") + '个' + set.name + '文件到这里 / 点此选择，并' + set.title + '\
	</div>\
	<input type="file" class="RuntimeChoiceFile" style="display:none" accept="' + set.mime + '" ' + (set.multiple ? 'multiple="multiple"' : '') + '>\
</div>');
            $("." + cls + " .RuntimeChoiceDropFile").bind("dragover", function (e) {
                e.preventDefault();
            }).bind("drop", function (e) {
                e.preventDefault();

                readChoiceFile(e.originalEvent.dataTransfer.files);
            });
            $("." + cls + " .RuntimeChoiceFile").bind("change", function (e) {
                readChoiceFile(e.target.files);
            });

            function readChoiceFile(files) {
                if (!files.length) {
                    return;
                }
                ;

                Runtime.Log("发现" + files.length + "个文件，开始" + set.title + "...");

                var idx = -1;
                var run = function () {
                    idx++;
                    if (idx >= files.length) {
                        return;
                    }
                    ;

                    var file = files[idx];
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        set.process(file.name, e.target.result, files.length, idx, run);
                    }
                    reader.readAsArrayBuffer(file);
                };
                run();
            };
        };


    })();
</script>


<script>
    $(function () {
        var elem = $(".codeEdit");
        var w = elem.width();
        var edit = CodeMirror.fromTextArea(elem[0], {
            mode: "javascript"
            , lineNumbers: true
            , lineWrapping: true
        });
        Runtime.CodeEdit = edit;
        edit.setSize(w + "px", "auto");
        edit.on("change", function (a) {
            clearTrustBGInt();

            var val = a.getValue();
            if (/^https:\/\/xiangyuecn/.test(val)) {
                setVal("");
                Runtime.Log("检测到输入了URL，正在解析此URL...");
                setTimeout(function () {
                    viewUrlCode(val);
                });
                return;
            }
            ;
            elem.val(val);
        });

        var setVal = function (val) {
            edit.setValue(val);

            edit.refresh();
        };
        var loadDemoCode = function (key, name, end) {
            var path = "runtime-codes/" + key + ".js";
            Runtime.Log("正在加载" + path + "...");
            $.ajax({
                url: path
                , dataType: "text"
                , success: function (data) {
                    setVal(data);

                    Runtime.Log("注意：编辑框内的代码是由本工具提供的运行环境支持，如果要copy代码到其他html内使用，需要把Runtime相关的调用删除或使用别的代码代替。", "#f60;font-weight:bold");

                    var rn = (/《(.+?)》/.exec(data) || [])[1] || "";
                    if (name) {
                        if (name.indexOf(rn) == -1) {
                            console.warn("demo js文件内名称和本页面内手写的名称不一致", rn, name);
                        }
                        ;
                        Runtime.Log("已在编辑框内显示了《" + name + "》Demo的源码，可运行查看效果");
                    } else {
                        Runtime.Log("已加载《" + (rn || path) + "》源码，可运行查看效果", 2);
                    }
                    ;

                    end && end();
                }
                , error: function () {
                    Runtime.Log("加载指定的" + path + '失败，请到<a href="https://github.com/xiangyuecn/Recorder/tree/master/assets/runtime-codes" target="_blank">/assets/runtime-codes</a>目录内查阅源码', 1);
                }
            });
        };
        Runtime.UseDemoCode = function (id, click) {
            var end = function () {
                if (click) {
                    $("html,body").animate({scrollTop: $(".mainCodeBtn").offset().top - 200}, 300);
                }
            };
            var o = DemoCodeList[id];
            if (o.code) {
                setVal(o.code);
                Runtime.Log("已在编辑框内显示了《" + (id + 1) + ". " + DemoCodeList[id].name + "》Demo的源码，可运行查看效果");
                end();
            } else {
                loadDemoCode(o.jsn, (id + 1) + ". " + o.name, end);
            }
            ;
        };

        DemoCodeList.sort(function (a, b) {
            return b.sort - a.sort
        });
        var html = [];
        for (var i = 0; i < DemoCodeList.length; i++) {
            var o = DemoCodeList[i];
            var href = 'href="?';
            if (o.idf) {
                href += "idf=" + encodeURIComponent(o.idf);
            } else if (o.jsn) {
                href += "jsname=" + encodeURIComponent(o.jsn);
            } else {
                href = "";
            }
            ;
            href && (href += '"');
            html.push('<div style="padding:8px 0">' + (i + 1) + '. <a ' + href + ' onclick="Runtime.UseDemoCode(' + i + ',1);return false">' + o.name + '</a></div>');
        }
        ;
        $(".demoList").html(html.join("\n"));


        var readMetas = function (txt) {
            var exp = /^\s*@(\w+) (```)?"([\S\s]*?)"\2|^\s*@[\u00ff-\uffff]+\((\w+)\)：(?:```"([\S\s]*?)"```|([^\s]*))/mg,
                m;
            var headers = {};
            while (m = exp.exec(txt)) {
                if (m[1]) {
                    headers[m[1]] = m[3] || "";
                } else {
                    headers[m[4]] = m[6] || m[5] || "";
                }
            }
            ;
            return headers;
        };
        var checkTrust = function (data) {
            //验证作者的公钥认证信息
            var trust = JSON.parse(data.RSA_Trust);
            var root;
            for (var i = 0; i < TrustRSARoots.length; i++) {
                if (TrustRSARoots[i].ID == trust.Root) {
                    root = TrustRSARoots[i];
                }
                ;
            }
            ;
            trust.root = root;
            var ok = false;
            if (root) {
                var txt = trust.Ver + "_" + trust.Time + "_" + trust.Root + "_" + trust.Name + "_" + data.RSA_Public_Exponent + "_" + data.RSA_Modulus;

                var rsa = RSA(root.Modulus, root.Public);
                ok = rsa.verify(txt, trust.Trust, "SHA1");
            }
            ;
            return ok ? trust : null;
        };
        var getMetaExp = function () {
            return /\/\*@Runtime Meta@[\S\s]+?@Runtime@\*\//ig;
        };
        var keepMetaKeys;
        Runtime.CodePubClick = function () {
            var val = edit.getValue();
            Runtime.Log("-----------");
            var store = JSON.parse(localStorage["RuntimeEditorData"] || "{}");

            //从源码中恢复部分参数
            var meta = (getMetaExp().exec(val) || [])[0];
            var data = readMetas(meta);
            store.Ver = data.Ver;
            store.Title = data.Title;
            store.Desc = data.Desc;

            store.Author = store.Author || data.Author;
            store.RSA_Public_Exponent = store.RSA_Public_Exponent || data.RSA_Public_Exponent;
            store.RSA_Modulus = store.RSA_Modulus || data.RSA_Modulus;
            store.RSA_Trust = store.RSA_Trust || data.RSA_Trust;


            var exp = /\/\*@Runtime Editor@[\S\s]+?@Runtime@\*\//ig;
            var m = exp.exec(val);
            if (!m) {
                keepMetaKeys = [];
                var tmp = SignRuntimeEditor.replace(/\$\{(\w+)\}/g, function (a, b) {
                    keepMetaKeys.push(b);
                    return store[b] || "";
                });
                setVal(val + "\n\n" + tmp);
                Runtime.Log("请完善Runtime Editor中的代码和作者信息，然后再次点击分发按钮");
                return;
            }
            ;
            exp.lastIndex = 0;
            val = val.replace(exp, "");
            val = val.replace(getMetaExp(), "");
            val = val.replace(/^\s+|\s+$/g, "");

            var data = readMetas(m[0]);
            console.log("Runtime Editor", data);

            if (!data.RSA_Modulus || !data.RSA_Private_Exponent || !data.RSA_Public_Exponent) {
                Runtime.Log("请填写你的源码签名RSA私钥参数", 1);
                return;
            }
            ;
            if (data.RSA_Trust) {
                //验证作者的公钥认证信息
                var trust = checkTrust(data);
                if (!trust) {
                    Runtime.Log("RSA_Trust信息无法通过验证，请检查认证信息的正确性", 1);
                    return;
                }
                ;

                //将作者改成验证的名称
                data.Author = trust.Name;
            } else {
                Runtime.Log("没有RSA_Trust信息，此分发代码可能被识别为非原作者", 1);
            }
            ;

            var meta = "/*@Runtime Meta@** 《" + data.Title + "》";
            meta += "\n@源码标题(Title)：" + data.Title;
            meta += "\n@作者(Author)：" + data.Author;
            meta += "\n@版本(Ver)：" + data.Ver;
            meta += "\n@时间：" + new Date().toLocaleString();
            meta += "\n@描述(Desc)：```\"" + data.Desc + "\"```";
            meta += "\n-----------";
            meta += "\n@公钥指数(RSA_Public_Exponent)：" + data.RSA_Public_Exponent;
            meta += "\n@模数(RSA_Modulus)：" + data.RSA_Modulus;
            meta += "\n@认证信息(RSA_Trust)：```\"" + data.RSA_Trust + "\"```";
            meta += "\n@签名(RSA_Sign)：";
            meta += "\n**@Runtime@*/";
            val = meta + "\n\n\n" + val;

            //签名
            var rsa = RSA(data.RSA_Modulus, data.RSA_Public_Exponent, data.RSA_Private_Exponent);
            var sign = "";
            try {
                var st = rsa.sign(val, "SHA1");
                if (rsa.verify(val, st, "SHA1")) {
                    sign = st;
                }
                ;
            } catch (e) {
            }
            if (!sign) {
                Runtime.Log("签名RSA私钥无效，请检查参数", 1);
                return;
            }
            ;
            val = val.replace(/@签名\(RSA_Sign\)：/, "@签名(RSA_Sign)：" + sign);

            //生成url
            var sha1 = SHA1(val);
            var urlb64 = btoa(unescape(encodeURIComponent(val)))
                .replace(/\+/g, "-")
                .replace(/\//g, "_")
                .replace(/=/g, ".");
            var url = "https://xiangyuecn.gitee.io/recorder/assets/" + encodeURIComponent("工具-代码运行和静态分发Runtime") + ".html#sha1=" + sha1 + "&shareCode=v1_" + encodeURIComponent(urlb64);

            Runtime.Log('<textarea style="width:300px;height:80px">' + url + '</textarea>');
            Runtime.Log("已分发，url大小" + url.length + "b，<a href='" + url + "' target='_blank'>地址</a> <a href='https://www.ft12.com/' target='_blank'>短网址</a>", 2);

            //存储可存储备用的公开数据
            localStorage["RuntimeEditorData"] = JSON.stringify({
                Author: data.Author
                , RSA_Public_Exponent: data.RSA_Public_Exponent
                , RSA_Modulus: data.RSA_Modulus
                , RSA_Trust: data.RSA_Trust
            });
        };


        //显示代码
        var viewUrlCode = function (href) {
            var idf = decodeURIComponent((/[?#&]idf=([^&#]+)/.exec(href) || [])[1] || "");
            var jsname = decodeURIComponent((/[?#&]jsname=([\w\-\.]+)/.exec(href) || [])[1] || "");
            var sha1 = (/[?#&]sha1=([^&#]+)/.exec(href) || [])[1];
            var shareCode = /[?#&]shareCode=v(\d+)_([^&#]+)/.exec(href);
            if (!shareCode) {
                if (jsname) {
                    loadDemoCode(jsname);
                    return;
                }
                ;

                if (idf) {
                    for (var i = 0; i < DemoCodeList.length; i++) {
                        if (DemoCodeList[i].idf == idf) {
                            Runtime.UseDemoCode(i);
                            return;
                        }
                        ;
                    }
                    ;
                    Runtime.Log("未知启动标识：" + idf, 1);
                    return;
                }
                ;

                Runtime.Log("初始化完成，可以编写代码，或者点击一个Demo来编辑", 2);
                return;
            }
            ;
            var shareVer = shareCode[1];
            var tips = "请检查链接是否完整。因为太长的url可能会被浏览器截断导致代码不完整，可通过把完整的url粘贴到上面的代码编辑框内，程序将尝试解析还原出代码。";
            try {
                var code = decodeURIComponent(shareCode[2])
                    .replace(/\-/g, "+")
                    .replace(/\_/g, "/")
                    .replace(/\./g, "=");
                try {
                    code = atob(code);
                } catch (e) {
                    Runtime.Log("分发的源码Base64解码失败，" + tips, 1);
                    return;
                }
                ;
                code = decodeURIComponent(escape(code));

                if (sha1 != SHA1(code)) {
                    Runtime.Log("分发的源码校验和不一致，" + tips, 1);
                    return;
                }
                ;
            } catch (e) {
                Runtime.Log("分发的源码解码失败，" + tips + "<br><br>" + e.stack, 1);
                return;
            }
            ;

            var meta = (getMetaExp().exec(code) || [])[0] || "";
            var data = readMetas(meta);
            if (!data.RSA_Modulus || !data.RSA_Public_Exponent || !data.RSA_Sign) {
                Runtime.Log("此分发的源码没有作者签名，请联系作者", 1);
                return;
            }
            ;

            //验证签名
            var code2 = code.replace(/@签名\(RSA_Sign\)：[^\s]+/, "@签名(RSA_Sign)：");
            var rsa = RSA(data.RSA_Modulus, data.RSA_Public_Exponent);
            if (!rsa.verify(code2, data.RSA_Sign, "SHA1")) {
                Runtime.Log("此分发的源码的作者签名无效，请联系作者", 1);
                return;
            }
            ;

            //验证认证信息
            var isTrust = false, trust;
            if (data.RSA_Trust) {
                //验证作者的公钥认证信息
                trust = checkTrust(data);
                if (!trust) {
                    //完全被篡改
                    Runtime.Log("作者提供的认证签名信息无法通过验证，这往往代表着代码已被篡改", 1);
                } else {
                    isTrust = true;
                }
                ;
            }
            ;

            setVal(code);

            if (isTrust) {
                Runtime.Log("已加载《" + data.Title + "》作者:" + data.Author + "，作者身份已通过 \"" + trust.root.Name + "\" 的确认", 2);
            } else {
                Runtime.Log("已加载《" + data.Title + "》作者自称为:" + data.Author + "，未能进行鉴定，请自行分辨", 1);

                var n = 0;
                var run = function () {
                    n++;
                    $("body").css("background", n % 2 ? "red" : "#f5f5f5");
                };
                run();
                trustBGInt = setInterval(run, 1000);
            }
            ;
        };
        var trustBGInt;

        function clearTrustBGInt() {
            if (trustBGInt) {
                clearInterval(trustBGInt);
                trustBGInt = 0;
                $("body").css("background", "#f5f5f5");
            }
            ;
        };

        viewUrlCode(location.href);
    });


    var SignRuntimeEditor = (function () {
        /*@Runtime Editor@* 【代码分发信息和作者】
----------------
@Author "${Author}" 作者（如果填了RSA_Trust，此处会被覆盖），请填入引号中，下同
@Ver "${Ver}" 版本号
@Title "${Title}" 代码标题
@Desc ```"${Desc}"``` 描述信息，可多行
----------------
源码签名RSA私钥参数（Base64），填入下面的引号中：
@RSA_Private_Exponent "" 私钥指数 D
@RSA_Public_Exponent "${RSA_Public_Exponent}" 公钥指数 E 一般为AQAB
@RSA_Modulus "${RSA_Modulus}" 模数 N

RSA私钥用于确保分发出去的代码是作者编写的未被篡改，如果你没有RSA私钥，可以用openssl生成一个，然后提取出上面这3个参数。

或者在本页面控制台内输入 rsa=RSA(1024);console.log(rsa.getPrivate());console.log(rsa.getPublic());console.log(rsa.getModulus()) 即可获得。
----------------
作者应保管好私钥，否则将无法验证作者身份。正常情况下作者的身份是不被信任的，如果需要被信任，可申请本页面TrustRSARoots中的秘钥给你的公钥进行签名认证，然后将认证信息填入下面的引号中：
@RSA_Trust ```"${RSA_Trust}"```
----------------
*@Runtime@*/
    }).toString().replace(/^function\s*\(\)\s*\{|\s*\}$/g, "");

    var DemoCodeList = [];

    function AddDemoCode(sort, idf, name, fn, jsn) {
        DemoCodeList.push({
            sort: sort ? sort : 666 - DemoCodeList.length,
            idf: idf,
            name: name,
            code: fn && fn.toString().replace(/^function\s*\(\)\s*\{|\s*\}$/g, ""),
            jsn: jsn
        });
    };
</script>


<script>
    AddDemoCode(-999, "self_trust", "【工具】TrustRSARoots作者公钥认证", function () {
        /******************
         《TrustRSARoots公钥认证》
         作者：高坚果
         时间：2019-9-12 21:59:19
         ******************/
        Runtime.Log("开始认证...");
        (function () {
            var info = {
                Name: "" //【填写】作者名称
                , Modulus: "" //【填写】待认证模数
                , Public: "AQAB" //【填写】待认证公钥指数
            };

            if (!info.Name || !info.Public || !info.Modulus) {
                Runtime.Log("info信息不全，请在代码中填写完整", 1);
                return;
            }
            ;

            var idx = 0;
            if (TrustRSARoots.length > 1) {
                var roots = [];
                for (var i = 0; i < TrustRSARoots.length; i++) {
                    var o = TrustRSARoots[i];
                    roots.push((i + 1) + "：" + o.Name);
                }
                ;
                var i = prompt("请选择Root秘钥序号：\n" + roots.join("\n"), 1);
                if (i == null) {
                    Runtime.Log("已取消操作");
                    return;
                }
                ;
                idx = (+i) - 1;
            }
            ;
            var item = TrustRSARoots[idx];
            if (!item) {
                Runtime.Log("序号无效", 1);
                return;
            }
            ;

            var d = prompt("请输入\"" + item.Name + "\"的私钥Private Exponent Base64");
            if (!d) {
                Runtime.Log("已取消操作");
                return;
            }
            ;

            var rsa = RSA(item.Modulus, item.Public, d);

            //验证秘钥是否正确
            if (rsa.sign(item.ID) != item.SelfSign) {
                Runtime.Log(item.Name + "私钥错误", 1);
                return;
            }
            ;
            if (!rsa.verify(item.ID, item.SelfSign)) {
                Runtime.Log(item.Name + "公钥似乎是错的", 1);
                return;
            }
            ;

            var ver = "1.0";
            var time = "" + Date.now();
            var data = ver + "_" + time + "_" + item.ID + "_" + info.Name + "_" + info.Public + "_" + info.Modulus;
            var sign = rsa.sign(data, "SHA1");
            var rtv = JSON.stringify({
                Ver: ver
                , Time: time
                , Root: item.ID
                , Name: info.Name
                , Trust: sign
            });

            Runtime.Log('<textarea style="width:300px;height:80px">' + rtv + '</textarea>');
            Runtime.Log("已签名", 2);
        })();
    });


    AddDemoCode(999, "self_base_demo", "【教程】本工具使用示例，和Recorder基础用法", function () {/******************
     《本工具使用示例，和Recorder基础用法》
     作者：高坚果
     时间：2019-9-12 21:59:19

     工具的编辑框内可编写代码然后运行；代码内可调用本工具提供的Runtime的方法，使用了这些方法时，如果要copy代码到其他html内使用，需要把Runtime相关的调用删除或使用别的代码代替。

     可调用Runtime方法列表：
     RootFolder:"" 当前程序根目录，结尾不含/

     Runtime.Import(jsList) 导入js列表，只能调用一次，jsList:[{url:"",check:fn()},...] check返回false跳过这条的导入

     Runtime.Ctrls(ctrls) 在控制区显示按钮，只能调用一次，ctrls:[{name:"按钮名称",click:"函数名称",cls:"class name"},{html:"html代码"},{choiceFile:{multiple:true,name:"音乐",title:"转换",mime:"audio/*",process:fn(fileName,arrayBuffer,filesCount,fileIdx,endCall)}},...]

     Runtime.ReadBlob(blob,call) 读取blob为arrayBuffer,call(arrayBuffer)

     Runtime.DecodeAudio(fileName,arrayBuffer,True,False) 解码一个音频文件，True({sampleRate:采样率,duration:音频时长,srcBlob:Blob对象,type:从文件名中提取的音频类型,data:[Int16,...]pcm数据})，False(errMsg)

     Runtime.Log(msgHtml,color) 在日志区显示日志html，color:0默认，1红色，2绿色，其他指定颜色

     Runtime.LogAudio(blob,duration,rec,msgHtml) 在日志区显示一个音频的日志信息，rec只要对象内有set属性就行

     Runtime.Process(buffers,powerLevel,bufferDuration,bufferSampleRate) 接受Recorder的实时回调，驱动图形显示
     ******************/

        /*****加载框架，把这几个js用script标签引入到html就可以进行mp3录音*****/
        Runtime.Import([
            {
                url: RootFolder + "/src/recorder-core.js", check: function () {
                    return !window.Recorder
                }
            }
            , {
                url: RootFolder + "/src/engine/mp3.js", check: function () {
                    return !Recorder.prototype.mp3
                }
            }
            , {
                url: RootFolder + "/src/engine/mp3-engine.js", check: function () {
                    return !Recorder.lamejs
                }
            }
        ]);

        /*****显示控制按钮和界面控制，这几坨代码无关紧要*****/
        Runtime.Ctrls([
            {name: "打开录音，请求权限", click: "recOpen"}
            , {name: "开始录音", click: "recStart"}
            , {name: "结束录音，并释放资源", click: "recStop"}
        ]);


        /*****录音核心代码*****/
        var rec;
        /**调用open打开录音请求好录音权限**/
        var recOpen = function () {//一般在显示出录音按钮或相关的录音界面时进行此方法调用，后面用户点击开始录音时就能畅通无阻了
            rec = Recorder({
                type: "mp3", sampleRate: 16000, bitRate: 16
                , onProcess: function (buffers, powerLevel, bufferDuration, bufferSampleRate) {
                    Runtime.Process.apply(null, arguments);
                }
            });

            //if(Is Mobile)//只针对移动端，demo偷一下懒
            var t = setTimeout(function () {
                Runtime.Log("无法录音：权限请求被忽略（超时假装手动点击了确认对话框）", 1);
            }, 8000);

            Runtime.Log("正在打开录音，请求麦克风权限...");
            rec.open(function () {
                clearTimeout(t);

                Runtime.Log("已打开录音，可以点击开始了", 2);

                //rec.start() 此处可以立即开始录音，但不建议这样编写，因为open是一个延迟漫长的操作，通过两次用户操作来分别调用open和start是推荐的最佳流程
            }, function (msg, isUserNotAllow) {//用户拒绝未授权或不支持
                clearTimeout(t);
                Runtime.Log((isUserNotAllow ? "UserNotAllow，" : "") + "无法录音:" + msg, 1);
            });
        };

        /**开始录音**/
        function recStart() {//打开了录音后才能进行start、stop调用，demo偷一下懒，按钮、判断啥都没有处理
            rec.start();
        };

        /**结束录音**/
        function recStop() {
            rec.stop(function (blob, duration) {
                rec.close();//释放录音资源，当然可以不释放，后面可以连续调用start；但不释放时系统或浏览器会一直提示在录音，最佳操作是录完就close掉

                Runtime.LogAudio(blob, duration, rec);
                rec = null;
            }, function (msg) {
                Runtime.Log("录音失败:" + msg, 1);
                rec.close();//可以通过stop方法的第3个参数来自动调用close
                rec = null;
            });
        };
    });
</script>


<script>
    (function () {
        var demos = [

            {n: "【Demo库】【格式转换】-mp3等格式解码转成其他格式", k: "lib.transform.mp32other"}
            , {n: "【Demo库】【格式转换】-wav格式转成其他格式", k: "lib.transform.wav2other"}
            , {n: "【Demo库】【格式转换】-amr格式转成其他格式", k: "lib.transform.amr2other"}

            , {n: "【教程】【音频流】【上传】实时转码并上传-通用版", k: "teach.realtime.encode_transfer"}
            , {n: "【教程】【音频流】【上传】实时转码并上传-mp3专版", k: "teach.realtime.encode_transfer_mp3"}
            , {n: "【教程】【音频流】【上传】实时转码并上传-pcm固定帧大小", k: "teach.realtime.encode_transfer_frame_pcm"}


            , {n: "【教程】【音频流】【播放】实时解码播放音频片段", k: "teach.realtime.decode_buffer_stream_player"}
            , {n: "【教程】【ASR】实时语音识别、音频文件转文字-阿里云版", k: "teach.realtime.asr.aliyun.short"}
            , {n: "【教程】实时录制处理audio、video标签的captureStream流", k: "teach.source_stream.capture_stream"}

            , {n: "【Demo库】【文件合并】-mp3多个片段文件合并", k: "lib.merge.mp3_merge"}
            , {n: "【Demo库】【文件合并】-wav多个片段文件合并", k: "lib.merge.wav_merge"}

            , {n: "【教程】实时多路音频混音", k: "teach.realtime.mix_multiple"}
            , {n: "【教程】变速变调音频转换", k: "teach.sonic.transform"}
            , {n: "【教程】新录音从老录音接续、或录制中途插入音频", k: "teach.env_in.follow"}
            , {n: "【教程】DTMF（电话拨号按键信号）解码、编码", k: "teach.dtmf.decode_and_encode"}

            , {n: "【Demo库】PCM采样率提升", k: "lib.samplerate.raise"}
            , {n: "【Demo库】【信号处理】IIR低通、高通滤波", k: "dsp.lib.filter.iir"}
            , {n: "【测试】【信号处理】FFT频域分析ECharts频谱曲线图", k: "dsp.test.fft.analysis"}
            , {n: "【测试】WebM格式解析并提取音频", k: "test.webm.extract_audio"}
            , {n: "【测试】G711、G72X编码和解码播放", k: "test.g7xx.engine"}
            , {n: "【测试】音乐合成-用波形函数将歌曲简谱文本转成PCM", k: "test.create-audio.nmn2pcm"}
            , {n: "【测试】音频可视化相关插件测试", k: "test.extensions.visualization"}

        ];

        var markdown = [];
        for (var i = 0; i < demos.length; i++) {
            var o = demos[i];
            markdown.push((i + 1) + '. [' + o.n + '](https://xiangyuecn.gitee.io/recorder/assets/工具-代码运行和静态分发Runtime.html?jsname=' + o.k + ')');
            AddDemoCode(199 - i, "", o.n, null, o.k);
        }
        ;

        console.log("以下链接copy到README.【Demo片段列表】中");
        console.log("\n\n\n" + markdown.join("\n") + "\n\n\n");
    })();
</script>


<script>
    if (/mobile/i.test(navigator.userAgent)) {
        //移动端加载控制台组件
        var elem = document.createElement("script");
        elem.setAttribute("type", "text/javascript");
        elem.setAttribute("src", "https://xiangyuecn.gitee.io/recorder/assets/ztest-vconsole.js");
        document.body.appendChild(elem);
        elem.onload = function () {
            new VConsole();
        };
    }
    ;
</script>

<!-- 加载打赏挂件 -->
<script src="zdemo.widget.donate.js"></script>
<script>
    DonateWidget({
        log: function (msg) {
            Runtime.Log(msg)
        }
        , mobElem: $(".mainLogBox").append('<div class="DonateView"></div>').find(".DonateView")[0]
    });
</script>
<div>
    <div class="DonateWidget_dialogFloat"
         style="z-index:3;position: fixed;display:flex;align-items:center;justify-content:center;top:20%;right:5px">
        <div onclick="DonateWidget.cur.close(1,'Float')"
             style="position: absolute;font-size:32px;cursor: pointer;top: 0;right:8px;color:#fff;"
             class="DonateWidget_XCloseBtn">×
        </div>
        <div class="DonateWidget_dialogRender">
            <div class="DonateWidget_render"
                 style="border-radius:12px;background:linear-gradient(160deg, rgba(0,179,255,.7) 20%, rgba(177,0,255,.7) 80%);max-width:300px;padding:20px;text-align: center;">
                <div style="font-size:18px;color:#fff;" class="DonateWidget_Title">赏包辣条？</div>
                <div style="padding-top:14px"><span reclang="" acceptlang="zh" style="display:">			<img
                        src="https://xiangyuecn.gitee.io/recorder/assets/donate-alipay.png" style="width:145px">			<img
                        src="https://xiangyuecn.gitee.io/recorder/assets/donate-weixin.png" style="width:145px">		</span>
                    <span reclang="" acceptlang="!zh" style="display:none">			<a
                            href="https://paypal.me/xiangyuecn" target="_blank"
                            title="Go to the PayPal donation page"><img
                            src="https://xiangyuecn.gitee.io/recorder/assets/donate-paypal.png" style="width:145px"></a>			<a
                            href="https://liberapay.com/xiangyuecn" target="_blank"
                            title="Go to the Liberapay donation page"><img
                            src="https://xiangyuecn.gitee.io/recorder/assets/donate-liberapay.png" style="width:145px"></a>		</span>
                </div>
                <div style="padding-top:10px">
                    <button onclick="DonateWidget.cur.click(0,0,1)" class="DonateWidget_Btn DonateWidget_Btn_0"
                            style="margin-right:10px">算了吧😶
                    </button>
                    <button onclick="DonateWidget.cur.click(1,0,1)" class="DonateWidget_Btn DonateWidget_Btn_1">已打赏~
                        壕气😘
                    </button>
                </div>
                <style>.DonateWidget_Btn {
                    display: inline-block;
                    cursor: pointer;
                    border: none;
                    border-radius: 3px;
                    background: #f60;
                    color: #fff;
                    padding: 0 15px;
                    line-height: 36px;
                    height: 36px;
                    overflow: hidden;
                    vertical-align: middle;
                }

                .DonateWidget_Btn:active {
                    background: #f00;
                }</style>
            </div>
        </div>
    </div>
</div>


<div id="monica-content-root" class="monica-widget"></div>
<script type="text/javascript" src="../src/engine/mp3.js"></script>
<script type="text/javascript" src="../src/engine/mp3-engine.js"></script>
<script type="text/javascript" src="../src/engine/wav.js"></script>
</body>
<chatgpt-sidebar data-gpts-theme="light"></chatgpt-sidebar>
<chatgpt-sidebar-popups data-gpts-theme="light"></chatgpt-sidebar-popups>
</html>